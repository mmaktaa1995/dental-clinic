import{_ as c,f as u,c as r,a as s,n as p,g as b,b as d,y,F as h,z as v,t as l,d as m,v as f,i as w,j as k,w as _,k as C,o as i}from"./app-CpCrk5cI.js";/* empty css            */const V={data(){return{id:null,opened:!1,submitted:!1,errors:{},form:{date:"",amount:"",notes:"",patient_id:""},patients:[]}},mounted(){this.id=this.$route.params.id,u.get("/api/patients/dropdown").then(({data:n})=>{this.patients=n,u.get(`/api/visits/${this.id}`).then(({data:t})=>{this.form={...t,amount:+t.amount},console.log(this.form)})}),setTimeout(()=>{this.opened=!0},50)},methods:{back(){this.opened=!1,setTimeout(()=>this.$router.back(),300)},update(){const n=this;this.errors={},this.submitted=!0,u.patch(`/api/visits/${this.id}`,{...n.form}).then(({data:t})=>{bus.$emit("flash-message",{text:t.message,type:"success"}),bus.$emit("item-updated","true"),n.back()}).catch(t=>{t.response&&t.response.status===422&&(this.errors=t.response.data.errors)}).finally(()=>{this.submitted=!1})}}},B={class:p("fixed z-10 inset-0 overflow-y-auto "),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},j={class:"bg-white px-4 pt-5 sm:p-6"},N={class:"grid grid-cols-2 gap-6"},T={class:""},U=["value"],z={key:0,class:"text-red-600 text-xs text-right block"},M={class:""},S={key:0,class:"text-red-600 text-xs text-right block"},A={class:""},D={key:0,class:"text-red-600 text-xs text-right block"},F={class:"col-span-full"},E={key:0,class:"text-red-600 text-xs text-right block"},L={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-revers"};function q(n,t,G,H,e,a){const g=C("CAsyncButton");return i(),r("div",B,[s("form",{class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",onSubmit:t[6]||(t[6]=_(o=>a.update(),["prevent"]))},[s("div",{class:p(`fixed inset-0 bg-gray-500 transition-opacity duration-200 ${e.opened?"bg-opacity-75":"bg-opacity-0"}`),"aria-hidden":"true",onClick:t[0]||(t[0]=o=>a.back())},null,2),t[14]||(t[14]=s("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),s("div",{class:p(`inline-block w-full align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-xl sm:w-full duration-200  ${e.opened?"scale-100":"scale-0"}`)},[t[13]||(t[13]=s("div",{class:"bg-gray-50 px-4 py-2 border-b border-gray-300 text-right"},[s("h3",{class:"text-lg text-gray-700 font-normal"},[b("تعديل بيانات الزيارة "),s("b",{class:"font-bold"})])],-1)),s("div",j,[s("div",N,[s("div",T,[t[8]||(t[8]=s("label",{for:"patient_id",class:"block text-sm font-medium text-gray-700 text-right"},"المريض",-1)),d(s("select",{id:"patient_id","onUpdate:modelValue":t[1]||(t[1]=o=>e.form.patient_id=o),autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},[t[7]||(t[7]=s("option",{value:""},"اختر مريض",-1)),(i(!0),r(h,null,v(e.patients,(o,x)=>(i(),r("option",{value:x},l(o),9,U))),256))],512),[[y,e.form.patient_id]]),e.errors&&e.errors.patient_id?(i(),r("small",z,l(e.errors.patient_id[0]),1)):m("",!0)]),s("div",M,[t[9]||(t[9]=s("label",{for:"date",class:"block text-sm font-medium text-gray-700 text-right"},"تاريخ الزيارة",-1)),d(s("input",{id:"date","onUpdate:modelValue":t[2]||(t[2]=o=>e.form.date=o),type:"date",autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[f,e.form.date]]),e.errors&&e.errors.date?(i(),r("small",S,l(e.errors.date[0]),1)):m("",!0)]),s("div",A,[t[10]||(t[10]=s("label",{for:"amount",class:"block text-sm font-medium text-gray-700 text-right"},"المبلغ المدفوع",-1)),d(s("input",{id:"amount","onUpdate:modelValue":t[3]||(t[3]=o=>e.form.amount=o),type:"number",autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[f,e.form.amount]]),e.errors&&e.errors.amount?(i(),r("small",D,l(e.errors.amount[0]),1)):m("",!0)]),s("div",F,[t[11]||(t[11]=s("label",{for:"notes",class:"block text-sm font-medium text-gray-700 text-right"},"الملاحظات",-1)),d(s("textarea",{id:"notes","onUpdate:modelValue":t[4]||(t[4]=o=>e.form.notes=o),autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[f,e.form.notes]]),e.errors&&e.errors.notes?(i(),r("small",E,l(e.errors.notes[0]),1)):m("",!0)])])]),s("div",L,[s("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:t[5]||(t[5]=o=>a.back())}," إلغاء "),w(g,{type:"submit",loading:e.submitted,class:"w-full inline-flex justify-center rounded-md border border-transparent transition duration-75 transition-all shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm"},{default:k(()=>t[12]||(t[12]=[b(" حفظ ")]),void 0),_:1},8,["loading"])])],2)],32)])}const K=c(V,[["render",q]]);export{K as default};
