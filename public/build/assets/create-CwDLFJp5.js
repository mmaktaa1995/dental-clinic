import{r as p,p as v,l as C,f as k,c as n,a as e,n as x,b as u,y as V,F as j,z as B,t as r,d as m,v as g,i as N,j as T,k as U,o as i,g as $}from"./app-CpCrk5cI.js";/* empty css            */const z={class:x("fixed z-10 inset-0 overflow-y-auto"),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},F={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},M={class:"bg-white px-4 pt-5 sm:p-6"},A={class:"grid grid-cols-2 gap-6"},D=["value"],S={key:0,class:"text-red-600 text-xs text-right block"},E={key:0,class:"text-red-600 text-xs text-right block"},L={key:0,class:"text-red-600 text-xs text-right block"},O={class:"col-span-full"},q={key:0,class:"text-red-600 text-xs text-right block"},G={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-revers"},K={__name:"create",setup(H){const d=p(!1),c=p(!1),o=v({}),s=v({date:"",amount:"",notes:"",patient_id:""}),b=p([]),f=()=>{d.value=!1,setTimeout(()=>{history.back()},300)},w=()=>{c.value=!0,o.value={},k.post("/api/visits",{...s}).then(({data:l})=>{bus.$emit("flash-message",{text:l.message,type:"success"}),bus.$emit("item-created",!0),f()}).catch(l=>{l.response&&l.response.status===422&&Object.assign(o,l.response.data.errors)}).finally(()=>{c.value=!1})},h=()=>{s.date="",s.amount="",s.notes="",s.patient_id=""};return C(()=>{setTimeout(()=>{d.value=!0,h(),k.get("/api/patients/dropdown").then(({data:l})=>{b.value=l})},50)}),(l,t)=>{const _=U("CAsyncButton");return i(),n("div",z,[e("div",F,[e("div",{class:x(`fixed inset-0 bg-gray-500 transition-opacity duration-200 ${d.value?"bg-opacity-75":"bg-opacity-0"}`),"aria-hidden":"true",onClick:f},null,2),t[11]||(t[11]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",{class:x(`inline-block w-full align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-xl sm:w-full duration-200 ${d.value?"scale-100":"scale-0"}`)},[t[10]||(t[10]=e("div",{class:"bg-gray-50 px-4 py-2 border-b border-gray-300 text-right"},[e("h3",{class:"font-bold text-lg text-gray-700"},"إضافة زيارة")],-1)),e("div",M,[e("div",A,[e("div",null,[t[5]||(t[5]=e("label",{for:"patient_id",class:"block text-sm font-medium text-gray-700 text-right"},"المريض",-1)),u(e("select",{id:"patient_id","onUpdate:modelValue":t[0]||(t[0]=a=>s.patient_id=a),autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},[t[4]||(t[4]=e("option",{value:""},"اختر مريض",-1)),(i(!0),n(j,null,B(b.value,(a,y)=>(i(),n("option",{key:y,value:y},r(a),9,D))),128))],512),[[V,s.patient_id]]),o.patient_id?(i(),n("small",S,r(o.patient_id[0]),1)):m("",!0)]),e("div",null,[t[6]||(t[6]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 text-right"},"تاريخ الزيارة",-1)),u(e("input",{id:"date","onUpdate:modelValue":t[1]||(t[1]=a=>s.date=a),type:"date",autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[g,s.date]]),o.date?(i(),n("small",E,r(o.date[0]),1)):m("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700 text-right"},"المبلغ المدفوع",-1)),u(e("input",{id:"amount","onUpdate:modelValue":t[2]||(t[2]=a=>s.amount=a),type:"number",autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[g,s.amount]]),o.amount?(i(),n("small",L,r(o.amount[0]),1)):m("",!0)]),e("div",O,[t[8]||(t[8]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 text-right"},"الملاحظات",-1)),u(e("textarea",{id:"notes","onUpdate:modelValue":t[3]||(t[3]=a=>s.notes=a),autocomplete:"off",class:"block border border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 mt-1 px-2 py-2 rounded-md shadow-sm sm:text-sm w-full"},null,512),[[g,s.notes]]),o.notes?(i(),n("small",q,r(o.notes[0]),1)):m("",!0)])])]),e("div",G,[e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:f}," إلغاء "),N(_,{type:"button",loading:c.value,class:"w-full inline-flex justify-center rounded-md border border-transparent transition duration-75 transition-all shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:w},{default:T(()=>t[9]||(t[9]=[$(" تأكيد ")]),void 0),_:1},8,["loading"])])],2)])])}}};export{K as default};
