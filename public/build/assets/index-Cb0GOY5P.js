import{r as s,l as S,c as y,a as l,i as p,j as k,u as w,f as D,k as m,o as N,t as _}from"./app-CpCrk5cI.js";import{f as i}from"./index-VaZfHV7P.js";import{p as c}from"./index-C89UBU5T.js";/* empty css            */import"./index-DyeTRx0b.js";import"./index-BRVyLNfZ.js";const B={class:"px-16 py-8"},b={__name:"index",setup(H){const d=s([]),f=s([]),n=s(""),o=s(""),u=w(),C=async(e,a)=>{if(n.value!==a||o.value!==e){n.value=a,o.value=e;const{data:r}=await D.get(`/api/appointments?year=${a}&month=${e}`);d.value=r.map(t=>({id:t.id,title:t.patient.name,description:t.notes,className:t.className,date:i(c(t.date),{representation:"date"}),start:i(c(t.start),{representation:"time"}),end:i(c(t.end),{representation:"time"})}))}},h=e=>{u.push({name:"appointments-create",query:{date:e.startStr}})},x=e=>{u.push({name:"appointments-edit",params:{id:e.event.id},query:{isPast:e.event.extendedProps.isPast}})},E=e=>{f.value=e};return S(()=>{C(o.value,n.value)}),(e,a)=>{const r=m("CFullCalendar"),t=m("router-view");return N(),y("div",B,[l("div",null,[p(r,{ref:"fullCalendar",events:d.value,onHandleDateSelect:h,onHandleEventClick:x,onHandleEvents:E},{eventContent:k(v=>[l("b",null,_(v.timeText),1),l("i",null,_(v.event.title),1)]),_:1},8,["events"])]),p(t)])}}};export{b as default};
